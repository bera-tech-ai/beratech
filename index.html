<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEVS ARENA - Ultimate Developer Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --dark-bg: #0a0a0f;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }
        
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }
        
        .neon-glow {
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
        }
        
        .neon-text {
            text-shadow: 0 0 10px var(--neon-blue);
        }
        
        .gradient-text {
            background: linear-gradient(45deg, var(--neon-blue), #0099ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-bg {
            background: var(--primary-gradient);
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
        }
        
        .sidebar {
            transition: all 0.3s ease;
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--neon-blue);
        }
        
        .nav-link.active {
            color: var(--neon-blue);
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--neon-blue);
            border-radius: 2px;
        }
        
        .mobile-nav {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-nav.open {
            transform: translateX(0);
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .typing-indicator {
            display: inline-block;
            animation: typing 1.4s infinite;
        }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }
        
        .btn-primary {
            background: var(--primary-gradient);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .btn-secondary {
            background: var(--secondary-gradient);
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 8px;
            background: var(--primary-gradient);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .channel-active {
            background: rgba(0, 243, 255, 0.1);
            border-left: 3px solid var(--neon-blue);
        }
        
        .message-self {
            background: rgba(0, 243, 255, 0.1);
            border-left: 3px solid var(--neon-blue);
        }
        
        .message-other {
            background: rgba(255, 255, 255, 0.05);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Navigation Bar -->
    <nav class="glass-dark fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-4">
                    <button id="mobileMenuBtn" class="md:hidden text-xl text-gray-300 hover:text-white">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 gradient-bg rounded-lg flex items-center justify-center">
                            <i class="fas fa-code text-white"></i>
                        </div>
                        <span class="text-xl font-bold gradient-text">DEVS ARENA</span>
                    </div>
                </div>

                <!-- Desktop Nav Links -->
                <div class="hidden md:flex items-center space-x-1">
                    <a href="#home" class="nav-link px-4 py-2 rounded-lg transition-all active">Home</a>
                    <a href="#learn" class="nav-link px-4 py-2 rounded-lg transition-all">Learn</a>
                    <a href="#projects" class="nav-link px-4 py-2 rounded-lg transition-all">Projects</a>
                    <a href="#api" class="nav-link px-4 py-2 rounded-lg transition-all">API Hub</a>
                    <a href="#tools" class="nav-link px-4 py-2 rounded-lg transition-all">Tools</a>
                    <a href="#ai" class="nav-link px-4 py-2 rounded-lg transition-all">AI Copilot</a>
                    <a href="#chat" class="nav-link px-4 py-2 rounded-lg transition-all">Chat</a>
                    <a href="#hackathons" class="nav-link px-4 py-2 rounded-lg transition-all">Hackathons</a>
                    <a href="#dashboard" class="nav-link px-4 py-2 rounded-lg transition-all">Dashboard</a>
                </div>

                <!-- Search Bar -->
                <div class="hidden lg:block flex-1 max-w-md mx-8">
                    <div class="relative">
                        <input 
                            type="text" 
                            id="globalSearch"
                            placeholder="Search lessons, users, projects..."
                            class="w-full glass rounded-full pl-10 pr-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:neon-glow"
                        >
                        <div class="absolute left-3 top-2.5 text-gray-400">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>

                <!-- Auth Buttons -->
                <div class="flex items-center space-x-3" id="authSection">
                    <button id="loginBtn" class="glass px-4 py-2 rounded-lg hover:neon-glow transition-all">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login
                    </button>
                    <button id="registerBtn" class="btn-primary px-4 py-2 rounded-lg text-white">
                        <i class="fas fa-user-plus mr-2"></i>Register
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div id="mobileNav" class="mobile-nav fixed inset-0 z-40 bg-black bg-opacity-90 md:hidden">
        <div class="flex flex-col h-full w-64 glass-dark p-6">
            <div class="flex justify-between items-center mb-8">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 gradient-bg rounded-lg flex items-center justify-center">
                        <i class="fas fa-code text-white text-sm"></i>
                    </div>
                    <span class="text-lg font-bold gradient-text">DEVS ARENA</span>
                </div>
                <button id="closeMobileMenu" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="flex-1 space-y-4">
                <a href="#home" class="nav-link block p-3 rounded-lg transition-all active">
                    <i class="fas fa-home mr-3"></i>Home
                </a>
                <a href="#learn" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-graduation-cap mr-3"></i>Learn
                </a>
                <a href="#projects" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-project-diagram mr-3"></i>Projects
                </a>
                <a href="#api" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-plug mr-3"></i>API Hub
                </a>
                <a href="#tools" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-tools mr-3"></i>Tools
                </a>
                <a href="#ai" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-robot mr-3"></i>AI Copilot
                </a>
                <a href="#chat" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-comments mr-3"></i>Chat
                </a>
                <a href="#hackathons" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-trophy mr-3"></i>Hackathons
                </a>
                <a href="#dashboard" class="nav-link block p-3 rounded-lg transition-all">
                    <i class="fas fa-chart-line mr-3"></i>Dashboard
                </a>
            </div>
            
            <div class="pt-6 border-t border-gray-700">
                <div class="flex space-x-3">
                    <button id="mobileLoginBtn" class="flex-1 glass px-4 py-2 rounded-lg text-center">
                        Login
                    </button>
                    <button id="mobileRegisterBtn" class="flex-1 btn-primary px-4 py-2 rounded-lg text-center text-white">
                        Register
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-20">
        <!-- Home Section -->
        <section id="home" class="section active min-h-screen flex items-center justify-center py-12">
            <div class="container mx-auto px-4">
                <div class="text-center glass p-12 rounded-3xl max-w-5xl mx-auto">
                    <h1 class="text-5xl md:text-7xl font-bold mb-6 gradient-text">DEVS ARENA</h1>
                    <p class="text-xl md:text-2xl mb-8 text-gray-300 max-w-3xl mx-auto">
                        The Ultimate Professional Developer Ecosystem - Learn, Build, Collaborate, and Innovate in One Platform
                    </p>
                    <div class="flex flex-wrap justify-center gap-4 mt-8">
                        <button class="btn-primary px-8 py-3 rounded-lg text-white font-semibold">
                            <i class="fas fa-rocket mr-2"></i>Get Started
                        </button>
                        <button class="glass px-8 py-3 rounded-lg font-semibold hover:neon-glow">
                            <i class="fas fa-play-circle mr-2"></i>Watch Demo
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-16">
                        <div class="glass p-6 rounded-xl card-hover">
                            <div class="text-3xl mb-4 text-cyan-400">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <h3 class="font-semibold mb-2 text-lg">Interactive Learning</h3>
                            <p class="text-sm text-gray-400">Master coding with hands-on lessons and real-time feedback</p>
                        </div>
                        <div class="glass p-6 rounded-xl card-hover">
                            <div class="text-3xl mb-4 text-purple-400">
                                <i class="fas fa-code-branch"></i>
                            </div>
                            <h3 class="font-semibold mb-2 text-lg">Project Collaboration</h3>
                            <p class="text-sm text-gray-400">Build real projects with team members across the globe</p>
                        </div>
                        <div class="glass p-6 rounded-xl card-hover">
                            <div class="text-3xl mb-4 text-green-400">
                                <i class="fas fa-robot"></i>
                            </div>
                            <h3 class="font-semibold mb-2 text-lg">AI Assistant</h3>
                            <p class="text-sm text-gray-400">Get intelligent code suggestions and explanations</p>
                        </div>
                        <div class="glass p-6 rounded-xl card-hover">
                            <div class="text-3xl mb-4 text-yellow-400">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3 class="font-semibold mb-2 text-lg">Global Community</h3>
                            <p class="text-sm text-gray-400">Connect with developers worldwide in real-time chat</p>
                        </div>
                    </div>
                </div>
                
                <!-- Stats Section -->
                <div class="glass p-8 rounded-3xl max-w-5xl mx-auto mt-12">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                        <div>
                            <div class="text-3xl font-bold gradient-text">10K+</div>
                            <div class="text-gray-400">Active Developers</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold gradient-text">500+</div>
                            <div class="text-gray-400">Learning Modules</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold gradient-text">2K+</div>
                            <div class="text-gray-400">Projects Shared</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold gradient-text">50+</div>
                            <div class="text-gray-400">Hackathons Hosted</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Learning Section -->
        <section id="learn" class="section min-h-screen py-20">
            <div class="container mx-auto px-4">
                <div class="glass p-8 rounded-3xl">
                    <h2 class="text-4xl font-bold mb-8 gradient-text text-center">Devs School</h2>
                    <p class="text-center text-gray-300 mb-12 max-w-2xl mx-auto">
                        Master in-demand technologies with our interactive learning platform. Practice coding directly in your browser with instant feedback.
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="course-card glass p-6 rounded-xl card-hover cursor-pointer" data-course="html">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fab fa-html5 text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg">HTML</h3>
                                    <div class="progress-bar mt-2">
                                        <div class="progress-fill" style="width: 30%"></div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-400">Web structure fundamentals and semantic markup</p>
                            <div class="flex justify-between items-center mt-4 text-xs text-gray-500">
                                <span>12 lessons</span>
                                <span>Beginner</span>
                            </div>
                        </div>
                        
                        <div class="course-card glass p-6 rounded-xl card-hover cursor-pointer" data-course="css">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fab fa-css3-alt text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg">CSS</h3>
                                    <div class="progress-bar mt-2">
                                        <div class="progress-fill" style="width: 15%"></div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-400">Styling, layouts, and responsive design</p>
                            <div class="flex justify-between items-center mt-4 text-xs text-gray-500">
                                <span>18 lessons</span>
                                <span>Beginner</span>
                            </div>
                        </div>
                        
                        <div class="course-card glass p-6 rounded-xl card-hover cursor-pointer" data-course="javascript">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fab fa-js-square text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg">JavaScript</h3>
                                    <div class="progress-bar mt-2">
                                        <div class="progress-fill" style="width: 5%"></div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-400">Interactive web development and dynamic content</p>
                            <div class="flex justify-between items-center mt-4 text-xs text-gray-500">
                                <span>24 lessons</span>
                                <span>Intermediate</span>
                            </div>
                        </div>
                    </div>

                    <div id="lessonContent" class="hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 id="lessonTitle" class="text-2xl font-semibold"></h3>
                            <button id="backToCourses" class="glass px-4 py-2 rounded-lg">
                                <i class="fas fa-arrow-left mr-2"></i>Back to Courses
                            </button>
                        </div>
                        <div class="grid md:grid-cols-2 gap-8">
                            <div class="glass p-6 rounded-xl">
                                <div id="lessonText" class="prose prose-invert max-w-none"></div>
                            </div>
                            <div class="glass p-6 rounded-xl">
                                <h4 class="text-lg font-semibold mb-4">Try It Yourself</h4>
                                <div class="code-editor p-4 mb-4">
                                    <textarea id="codeEditor" class="w-full h-48 bg-transparent text-white resize-none focus:outline-none font-mono" placeholder="Write your code here..."></textarea>
                                </div>
                                <button id="runCode" class="btn-primary px-4 py-2 rounded-lg mb-4">
                                    <i class="fas fa-play mr-2"></i>Run Code
                                </button>
                                <div class="bg-black p-4 rounded-lg">
                                    <h5 class="font-semibold mb-2">Output:</h5>
                                    <div id="codeOutput" class="min-h-20 font-mono text-sm"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Copilot Section -->
        <section id="ai" class="section min-h-screen py-20">
            <div class="container mx-auto px-4">
                <div class="glass p-8 rounded-3xl">
                    <h2 class="text-4xl font-bold mb-8 gradient-text text-center">AI Coding Assistant</h2>
                    <p class="text-center text-gray-300 mb-12 max-w-2xl mx-auto">
                        Leverage artificial intelligence to write better code, understand complex concepts, and accelerate your learning.
                    </p>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div class="glass p-6 rounded-xl">
                                <h3 class="text-xl font-semibold mb-4 flex items-center">
                                    <i class="fas fa-code mr-2 text-cyan-400"></i>Code Generator
                                </h3>
                                <textarea 
                                    id="aiPrompt" 
                                    placeholder="Describe what you want to code (e.g., 'a function that reverses a string')..."
                                    class="w-full h-32 glass rounded-lg p-4 text-white placeholder-gray-400 focus:outline-none focus:neon-glow mb-4"
                                ></textarea>
                                <select id="aiLanguage" class="w-full glass rounded-lg p-2 text-white mb-4">
                                    <option value="javascript">JavaScript</option>
                                    <option value="python">Python</option>
                                    <option value="html">HTML</option>
                                    <option value="css">CSS</option>
                                    <option value="java">Java</option>
                                    <option value="cpp">C++</option>
                                </select>
                                <button id="generateCode" class="btn-primary px-6 py-3 rounded-lg w-full">
                                    <i class="fas fa-bolt mr-2"></i>Generate Code
                                </button>
                            </div>

                            <div class="glass p-6 rounded-xl">
                                <h3 class="text-xl font-semibold mb-4 flex items-center">
                                    <i class="fas fa-question-circle mr-2 text-purple-400"></i>Code Explainer
                                </h3>
                                <textarea 
                                    id="codeToExplain" 
                                    placeholder="Paste your code here for a detailed explanation..."
                                    class="w-full h-32 glass rounded-lg p-4 text-white placeholder-gray-400 focus:outline-none focus:neon-glow mb-4"
                                ></textarea>
                                <button id="explainCode" class="btn-secondary px-6 py-3 rounded-lg w-full">
                                    <i class="fas fa-lightbulb mr-2"></i>Explain Code
                                </button>
                            </div>
                        </div>

                        <div class="glass p-6 rounded-xl">
                            <h3 class="text-xl font-semibold mb-4 flex items-center">
                                <i class="fas fa-terminal mr-2 text-green-400"></i>AI Output
                            </h3>
                            <div class="code-editor p-4 min-h-96 max-h-96 overflow-auto">
                                <pre id="aiOutput" class="text-white whitespace-pre-wrap font-mono text-sm"></pre>
                            </div>
                            <div class="flex space-x-3 mt-4">
                                <button id="copyAiOutput" class="flex-1 glass px-4 py-2 rounded-lg">
                                    <i class="fas fa-copy mr-2"></i>Copy to Clipboard
                                </button>
                                <button id="clearAiOutput" class="flex-1 glass px-4 py-2 rounded-lg">
                                    <i class="fas fa-trash mr-2"></i>Clear
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Section -->
        <section id="chat" class="section min-h-screen py-20">
            <div class="container mx-auto px-4">
                <div class="glass p-8 rounded-3xl">
                    <h2 class="text-4xl font-bold mb-8 gradient-text text-center">Global Developer Chat</h2>
                    <p class="text-center text-gray-300 mb-12 max-w-2xl mx-auto">
                        Connect with developers worldwide in real-time. Share knowledge, ask questions, and collaborate on projects.
                    </p>
                    
                    <div class="grid md:grid-cols-4 gap-6 h-[600px]">
                        <!-- Channels Sidebar -->
                        <div class="md:col-span-1 glass p-4 rounded-xl flex flex-col">
                            <h3 class="font-semibold mb-4 text-lg">Channels</h3>
                            <div class="space-y-2 flex-1 overflow-auto">
                                <button class="channel-btn w-full text-left p-3 rounded-lg transition-all hover:bg-white/5" data-channel="general">
                                    <i class="fas fa-hashtag mr-2 text-gray-400"></i>General
                                </button>
                                <button class="channel-btn w-full text-left p-3 rounded-lg transition-all hover:bg-white/5" data-channel="frontend">
                                    <i class="fas fa-palette mr-2 text-blue-400"></i>Frontend
                                </button>
                                <button class="channel-btn w-full text-left p-3 rounded-lg transition-all hover:bg-white/5" data-channel="backend">
                                    <i class="fas fa-server mr-2 text-green-400"></i>Backend
                                </button>
                                <button class="channel-btn w-full text-left p-3 rounded-lg transition-all hover:bg-white/5" data-channel="ai">
                                    <i class="fas fa-robot mr-2 text-purple-400"></i>AI & ML
                                </button>
                                <button class="channel-btn w-full text-left p-3 rounded-lg transition-all hover:bg-white/5" data-channel="devops">
                                    <i class="fas fa-cloud mr-2 text-yellow-400"></i>DevOps
                                </button>
                                <button class="channel-btn w-full text-left p-3 rounded-lg transition-all hover:bg-white/5" data-channel="career">
                                    <i class="fas fa-briefcase mr-2 text-red-400"></i>Career
                                </button>
                            </div>
                            
                            <div class="pt-4 border-t border-gray-700 mt-4">
                                <div class="text-sm text-gray-400 mb-2">Online Users</div>
                                <div id="onlineUsers" class="space-y-2">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Area -->
                        <div class="md:col-span-3 flex flex-col">
                            <div id="chatHeader" class="glass-dark p-4 rounded-t-xl">
                                <h3 id="currentChannel" class="font-semibold text-lg">
                                    <i class="fas fa-hashtag mr-2"></i>Select a channel
                                </h3>
                                <div id="channelDescription" class="text-sm text-gray-400 mt-1">
                                    Join a channel to start chatting with the community
                                </div>
                            </div>
                            
                            <div id="messagesContainer" class="flex-1 overflow-y-auto p-4 space-y-4 bg-black bg-opacity-20">
                                <div class="text-center text-gray-400 py-8">
                                    <i class="fas fa-comments text-4xl mb-4 opacity-50"></i>
                                    <p>Select a channel to view messages</p>
                                </div>
                            </div>
                            
                            <div class="glass-dark p-4 rounded-b-xl">
                                <div id="typingIndicator" class="text-sm text-gray-400 mb-2 hidden">
                                    <span id="typingUsers"></span> is typing...
                                </div>
                                <div class="flex space-x-4">
                                    <input 
                                        type="text" 
                                        id="messageInput"
                                        placeholder="Type your message..."
                                        class="flex-1 glass rounded-full px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow"
                                        disabled
                                    >
                                    <button id="sendMessage" class="btn-primary px-6 py-3 rounded-full" disabled>
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Auth Modals -->
        <div id="loginModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50 p-4">
            <div class="glass p-8 rounded-3xl max-w-md w-full neon-glow">
                <h3 class="text-2xl font-bold mb-6 gradient-text text-center">Login to DEVS ARENA</h3>
                
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label class="block text-gray-300 mb-2">Email</label>
                        <input type="email" placeholder="your@email.com" class="w-full glass rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow" required>
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Password</label>
                        <input type="password" placeholder="••••••••" class="w-full glass rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow" required>
                    </div>
                    <button type="submit" class="w-full btn-primary py-3 rounded-lg font-semibold">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login
                    </button>
                </form>

                <div class="text-center mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-700"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-transparent text-gray-400">Or continue with</span>
                        </div>
                    </div>
                    
                    <button id="githubLogin" class="w-full glass py-3 rounded-lg flex items-center justify-center space-x-2 mt-4 hover:neon-glow transition-all">
                        <i class="fab fa-github"></i>
                        <span>GitHub</span>
                    </button>
                </div>

                <p class="text-center mt-6 text-gray-400">
                    Don't have an account? 
                    <button id="showRegister" class="text-cyan-400 hover:underline font-medium">Register now</button>
                </p>
            </div>
        </div>

        <div id="registerModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50 p-4">
            <div class="glass p-8 rounded-3xl max-w-md w-full neon-glow overflow-y-auto max-h-screen">
                <h3 class="text-2xl font-bold mb-6 gradient-text text-center">Join DEVS ARENA</h3>
                
                <form id="registerForm" class="space-y-4">
                    <div>
                        <label class="block text-gray-300 mb-2">Full Name</label>
                        <input type="text" placeholder="John Doe" class="w-full glass rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow" required>
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Email</label>
                        <input type="email" placeholder="your@email.com" class="w-full glass rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow" required>
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Password</label>
                        <input type="password" placeholder="••••••••" class="w-full glass rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow" required>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 mb-2">Country</label>
                            <select class="w-full glass rounded-lg p-3 text-white focus:outline-none focus:neon-glow">
                                <option value="">Select Country</option>
                                <option value="US">United States</option>
                                <option value="KE">Kenya</option>
                                <option value="UK">United Kingdom</option>
                                <option value="IN">India</option>
                                <option value="CA">Canada</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-300 mb-2">Skill Level</label>
                            <select class="w-full glass rounded-lg p-3 text-white focus:outline-none focus:neon-glow">
                                <option value="">Select Level</option>
                                <option value="beginner">Beginner</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-300 mb-2">Developer Type</label>
                        <select class="w-full glass rounded-lg p-3 text-white focus:outline-none focus:neon-glow">
                            <option value="">Select Type</option>
                            <option value="frontend">Frontend</option>
                            <option value="backend">Backend</option>
                            <option value="full-stack">Full Stack</option>
                            <option value="student">Student</option>
                            <option value="mobile">Mobile</option>
                            <option value="devops">DevOps</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-300 mb-2">Short Bio</label>
                        <textarea placeholder="Tell us about yourself..." class="w-full glass rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:neon-glow" rows="3"></textarea>
                    </div>

                    <button type="submit" class="w-full btn-primary py-3 rounded-lg font-semibold">
                        <i class="fas fa-user-plus mr-2"></i>Create Account
                    </button>
                </form>

                <p class="text-center mt-6 text-gray-400">
                    Already have an account? 
                    <button id="showLogin" class="text-cyan-400 hover:underline font-medium">Login here</button>
                </p>
            </div>
        </div>
    </main>

    <script>
        // Global state
        let currentUser = null;
        let socket = null;
        let currentChannel = null;
        let typingTimeout = null;

        // DOM Elements
        const elements = {
            // Navigation
            mobileMenuBtn: document.getElementById('mobileMenuBtn'),
            mobileNav: document.getElementById('mobileNav'),
            closeMobileMenu: document.getElementById('closeMobileMenu'),
            navLinks: document.querySelectorAll('.nav-link'),
            
            // Auth
            authSection: document.getElementById('authSection'),
            loginBtn: document.getElementById('loginBtn'),
            registerBtn: document.getElementById('registerBtn'),
            mobileLoginBtn: document.getElementById('mobileLoginBtn'),
            mobileRegisterBtn: document.getElementById('mobileRegisterBtn'),
            loginModal: document.getElementById('loginModal'),
            registerModal: document.getElementById('registerModal'),
            loginForm: document.getElementById('loginForm'),
            registerForm: document.getElementById('registerForm'),
            showLogin: document.getElementById('showLogin'),
            showRegister: document.getElementById('showRegister'),
            githubLogin: document.getElementById('githubLogin'),

            // Sections
            sections: document.querySelectorAll('.section'),

            // Learning
            courseCards: document.querySelectorAll('.course-card'),
            lessonContent: document.getElementById('lessonContent'),
            lessonTitle: document.getElementById('lessonTitle'),
            lessonText: document.getElementById('lessonText'),
            codeEditor: document.getElementById('codeEditor'),
            runCode: document.getElementById('runCode'),
            codeOutput: document.getElementById('codeOutput'),
            backToCourses: document.getElementById('backToCourses'),

            // AI
            aiPrompt: document.getElementById('aiPrompt'),
            aiLanguage: document.getElementById('aiLanguage'),
            generateCode: document.getElementById('generateCode'),
            codeToExplain: document.getElementById('codeToExplain'),
            explainCode: document.getElementById('explainCode'),
            aiOutput: document.getElementById('aiOutput'),
            copyAiOutput: document.getElementById('copyAiOutput'),
            clearAiOutput: document.getElementById('clearAiOutput'),

            // Chat
            channelBtns: document.querySelectorAll('.channel-btn'),
            currentChannel: document.getElementById('currentChannel'),
            channelDescription: document.getElementById('channelDescription'),
            messagesContainer: document.getElementById('messagesContainer'),
            messageInput: document.getElementById('messageInput'),
            sendMessage: document.getElementById('sendMessage'),
            typingIndicator: document.getElementById('typingIndicator'),
            typingUsers: document.getElementById('typingUsers'),
            onlineUsers: document.getElementById('onlineUsers')
        };

        // Navigation Functions
        function setupNavigation() {
            // Desktop navigation
            elements.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = e.target.getAttribute('href').substring(1);
                    
                    // Update active states
                    elements.navLinks.forEach(l => l.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    // Show section
                    showSection(target);
                    
                    // Close mobile menu if open
                    elements.mobileNav.classList.remove('open');
                });
            });
            
            // Mobile menu toggle
            elements.mobileMenuBtn.addEventListener('click', () => {
                elements.mobileNav.classList.add('open');
            });
            
            elements.closeMobileMenu.addEventListener('click', () => {
                elements.mobileNav.classList.remove('open');
            });
            
            // Close mobile menu when clicking outside
            elements.mobileNav.addEventListener('click', (e) => {
                if (e.target === elements.mobileNav) {
                    elements.mobileNav.classList.remove('open');
                }
            });
        }
        
        function showSection(sectionId) {
            // Hide all sections
            elements.sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                
                // Scroll to top of section
                window.scrollTo({
                    top: 80,
                    behavior: 'smooth'
                });
            }
        }

        // Auth Functions
        function setupAuth() {
            // Login button events
            elements.loginBtn.addEventListener('click', () => {
                elements.loginModal.classList.remove('hidden');
            });
            
            elements.mobileLoginBtn.addEventListener('click', () => {
                elements.loginModal.classList.remove('hidden');
                elements.mobileNav.classList.remove('open');
            });

            // Register button events
            elements.registerBtn.addEventListener('click', () => {
                elements.registerModal.classList.remove('hidden');
            });
            
            elements.mobileRegisterBtn.addEventListener('click', () => {
                elements.registerModal.classList.remove('hidden');
                elements.mobileNav.classList.remove('open');
            });

            // Modal toggle events
            elements.showLogin.addEventListener('click', () => {
                elements.registerModal.classList.add('hidden');
                elements.loginModal.classList.remove('hidden');
            });

            elements.showRegister.addEventListener('click', () => {
                elements.loginModal.classList.add('hidden');
                elements.registerModal.classList.remove('hidden');
            });

            // Close modals when clicking outside
            [elements.loginModal, elements.registerModal].forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });

            // Login Form
            elements.loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = {
                    email: formData.get('email'),
                    password: formData.get('password')
                };

                try {
                    const response = await fetch('/api/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();
                    
                    if (response.ok) {
                        currentUser = result.user;
                        localStorage.setItem('token', result.token);
                        updateAuthUI();
                        elements.loginModal.classList.add('hidden');
                        initializeSocket();
                    } else {
                        alert(result.error);
                    }
                } catch (error) {
                    alert('Login failed: ' + error.message);
                }
            });

            // Register Form
            elements.registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = {
                    fullName: formData.get('fullName'),
                    email: formData.get('email'),
                    password: formData.get('password'),
                    country: formData.get('country'),
                    skillLevel: formData.get('skillLevel'),
                    developerType: formData.get('developerType'),
                    bio: formData.get('bio')
                };

                try {
                    const response = await fetch('/api/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();
                    
                    if (response.ok) {
                        currentUser = result.user;
                        localStorage.setItem('token', result.token);
                        updateAuthUI();
                        elements.registerModal.classList.add('hidden');
                        initializeSocket();
                    } else {
                        alert(result.error);
                    }
                } catch (error) {
                    alert('Registration failed: ' + error.message);
                }
            });

            // GitHub Login
            elements.githubLogin.addEventListener('click', () => {
                window.location.href = '/auth/github';
            });
        }

        function updateAuthUI() {
            if (currentUser) {
                elements.authSection.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <img src="${currentUser.avatar || 'https://via.placeholder.com/32'}" 
                             alt="Avatar" 
                             class="w-8 h-8 rounded-full border-2 border-cyan-400">
                        <span class="hidden md:block">${currentUser.fullName}</span>
                        <button id="logoutBtn" class="glass px-4 py-2 rounded-lg hover:neon-glow">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </div>
                `;
                document.getElementById('logoutBtn').addEventListener('click', logout);
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('token');
            if (socket) {
                socket.disconnect();
                socket = null;
            }
            updateAuthUI();
        }

        // Check existing auth
        function checkAuth() {
            const token = localStorage.getItem('token');
            if (token) {
                // Verify token and get user data
                fetch('/api/users/me', {
                    headers: { 'Authorization': `Bearer ${token}` }
                })
                .then(response => response.json())
                .then(user => {
                    currentUser = user;
                    updateAuthUI();
                    initializeSocket();
                })
                .catch(() => {
                    localStorage.removeItem('token');
                });
            }
        }

        // Learning System
        function setupLearning() {
            elements.courseCards.forEach(card => {
                card.addEventListener('click', async () => {
                    const course = card.dataset.course;
                    await loadCourseLessons(course);
                });
            });

            elements.backToCourses.addEventListener('click', () => {
                elements.lessonContent.classList.add('hidden');
                document.querySelector('#learn .grid').classList.remove('hidden');
            });

            elements.runCode.addEventListener('click', () => {
                const code = elements.codeEditor.value;
                try {
                    if (code.includes('<html') || code.includes('<div')) {
                        elements.codeOutput.innerHTML = code;
                    } else if (code.includes('console.log')) {
                        const logs = [];
                        const originalLog = console.log;
                        console.log = (...args) => {
                            logs.push(args.join(' '));
                        };
                        
                        eval(code);
                        console.log = originalLog;
                        elements.codeOutput.textContent = logs.join('\n');
                    } else {
                        const result = eval(code);
                        elements.codeOutput.textContent = String(result);
                    }
                } catch (error) {
                    elements.codeOutput.textContent = 'Error: ' + error.message;
                }
            });
        }

        async function loadCourseLessons(course) {
            try {
                const response = await fetch(`/api/lessons?course=${course}`);
                const lessons = await response.json();
                
                if (lessons.length > 0) {
                    displayLesson(lessons[0]);
                }
            } catch (error) {
                console.error('Failed to load lessons:', error);
            }
        }

        function displayLesson(lesson) {
            document.querySelector('#learn .grid').classList.add('hidden');
            elements.lessonContent.classList.remove('hidden');
            
            elements.lessonTitle.textContent = lesson.title;
            elements.lessonText.innerHTML = DOMPurify.sanitize(marked.parse(lesson.content));
            elements.codeEditor.value = lesson.codeExample || '';
        }

        // AI Functions
        function setupAI() {
            elements.generateCode.addEventListener('click', async () => {
                const prompt = elements.aiPrompt.value;
                const language = elements.aiLanguage.value;
                
                if (!prompt.trim()) {
                    alert('Please enter a prompt');
                    return;
                }

                try {
                    const token = localStorage.getItem('token');
                    const response = await fetch('/api/ai/code', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({ prompt, language })
                    });

                    const result = await response.json();
                    elements.aiOutput.textContent = result.code;
                } catch (error) {
                    alert('Failed to generate code: ' + error.message);
                }
            });

            elements.explainCode.addEventListener('click', async () => {
                const code = elements.codeToExplain.value;
                
                if (!code.trim()) {
                    alert('Please enter some code');
                    return;
                }

                try {
                    const token = localStorage.getItem('token');
                    const response = await fetch('/api/ai/explain', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({ code })
                    });

                    const result = await response.json();
                    elements.aiOutput.textContent = result.explanation;
                } catch (error) {
                    alert('Failed to explain code: ' + error.message);
                }
            });

            elements.copyAiOutput.addEventListener('click', () => {
                navigator.clipboard.writeText(elements.aiOutput.textContent);
                alert('Copied to clipboard!');
            });

            elements.clearAiOutput.addEventListener('click', () => {
                elements.aiOutput.textContent = '';
            });
        }

        // Chat System
        function setupChat() {
            elements.channelBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const channel = btn.dataset.channel;
                    joinChannel(channel);
                    
                    // Update active channel UI
                    elements.channelBtns.forEach(b => b.classList.remove('channel-active'));
                    btn.classList.add('channel-active');
                });
            });

            elements.messageInput.addEventListener('input', () => {
                if (currentChannel) {
                    socket.emit('user-typing', {
                        channel: currentChannel,
                        user: currentUser.fullName,
                        isTyping: true
                    });

                    clearTimeout(typingTimeout);
                    typingTimeout = setTimeout(() => {
                        socket.emit('user-typing', {
                            channel: currentChannel,
                            user: currentUser.fullName,
                            isTyping: false
                        });
                    }, 1000);
                }
            });

            elements.sendMessage.addEventListener('click', sendMessage);
            elements.messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }

        function initializeSocket() {
            if (!currentUser) return;

            socket = io();
            
            socket.on('connect', () => {
                console.log('Connected to server');
            });

            socket.on('new-message', (message) => {
                displayMessage(message);
            });

            socket.on('user-typing', (data) => {
                if (data.isTyping) {
                    elements.typingUsers.textContent = data.user;
                    elements.typingIndicator.classList.remove('hidden');
                } else {
                    elements.typingIndicator.classList.add('hidden');
                }
            });

            // Enable chat input
            elements.messageInput.disabled = false;
            elements.sendMessage.disabled = false;
        }

        async function joinChannel(channel) {
            currentChannel = channel;
            elements.currentChannel.innerHTML = `<i class="fas fa-hashtag mr-2"></i>${channel}`;
            
            // Set channel description
            const descriptions = {
                general: "General discussions about programming and technology",
                frontend: "HTML, CSS, JavaScript, frameworks, and frontend development",
                backend: "Server-side programming, databases, APIs, and architecture",
                ai: "Artificial Intelligence, Machine Learning, and data science",
                devops: "Infrastructure, deployment, CI/CD, and cloud technologies",
                career: "Job opportunities, interviews, and career development"
            };
            elements.channelDescription.textContent = descriptions[channel] || "Community discussions";
            
            elements.messagesContainer.innerHTML = '<div class="text-center text-gray-400 py-8">Loading messages...</div>';

            if (socket) {
                socket.emit('join-channel', channel);
            }

            // Load previous messages
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`/api/messages/${channel}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const messages = await response.json();
                
                elements.messagesContainer.innerHTML = '';
                messages.forEach(displayMessage);
            } catch (error) {
                console.error('Failed to load messages:', error);
            }
        }

        function displayMessage(message) {
            const messageDiv = document.createElement('div');
            const isSelf = currentUser && message.user._id === currentUser._id;
            
            messageDiv.className = `flex space-x-3 ${isSelf ? 'justify-end' : ''}`;
            messageDiv.innerHTML = `
                ${!isSelf ? `<img src="${message.user.avatar || 'https://via.placeholder.com/32'}" 
                     alt="${message.user.fullName}" 
                     class="w-8 h-8 rounded-full flex-shrink-0">` : ''}
                <div class="max-w-[70%]">
                    ${!isSelf ? `<div class="flex items-center space-x-2 mb-1">
                        <span class="font-semibold text-sm">${message.user.fullName}</span>
                        <span class="text-xs text-gray-400">${new Date(message.timestamp).toLocaleTimeString()}</span>
                    </div>` : ''}
                    <div class="${isSelf ? 'message-self' : 'message-other'} p-3 rounded-2xl ${isSelf ? 'rounded-br-none' : 'rounded-bl-none'}">
                        ${DOMPurify.sanitize(message.content)}
                    </div>
                    ${isSelf ? `<div class="text-right mt-1">
                        <span class="text-xs text-gray-400">${new Date(message.timestamp).toLocaleTimeString()}</span>
                    </div>` : ''}
                </div>
                ${isSelf ? `<img src="${currentUser.avatar || 'https://via.placeholder.com/32'}" 
                     alt="${currentUser.fullName}" 
                     class="w-8 h-8 rounded-full flex-shrink-0">` : ''}
            `;
            elements.messagesContainer.appendChild(messageDiv);
            elements.messagesContainer.scrollTop = elements.messagesContainer.scrollHeight;
        }

        function sendMessage() {
            const content = elements.messageInput.value.trim();
            if (!content || !currentChannel || !socket) return;

            socket.emit('send-message', {
                channel: currentChannel,
                userId: currentUser._id,
                content: content,
                type: 'text'
            });

            elements.messageInput.value = '';
        }

        // Initialize sample data
        async function initializeSampleData() {
            // This would typically be handled by the server
            console.log('Initializing sample data...');
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            setupNavigation();
            setupAuth();
            setupLearning();
            setupAI();
            setupChat();
            checkAuth();
            initializeSampleData();
        });
    </script>
</body>
</html>
